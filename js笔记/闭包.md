## 闭包 ##
### MDN上闭包的概念： ###
闭包是指这样的作用域，它包含一个函数，这个函数可以调用被这个作用域所“封闭”的变量、函数或者闭包等内容。通常我们通过闭包所对应的函数来获得对闭包的访问。  

闭包是一种特殊的对象，它由两部分构成：函数，以及创建该函数的环境。环境由闭包创建时在作用域中的任何局部变量组成。

eg:  

	function makeFunc(){
		var name="jack";
		function displayName(){
			aler(name);
		}
		return displayName;
	}
	
	var myFunc=makeFunc();
	myFunc();  
makeFunc就是一个闭包对象，其中环境是指局部变量“name”(即闭包创建时存在的“jack”字符串),函数是指“displayName”  

eg:

    function makeAdder(x){
		return funciton(y){
			return x+y
		}
	}
	var add5=makeAdder(5);
	var add10=makeAdder(10);
	console.log(add5(2));  //7
	console.log(add10(2))  //10
如上，add5和add10都是闭包，他们共享相同的函数定义，但是保存了不同的环境。 
 
### 闭包的应用： ###

**用闭包模拟私有方法**
eg:

    var makeCounter=function(){
		var privateCounter=0;
		function changeBy(val){
			privateCounter+=val;
		}
		return{
			increment:function(){
				changeBy(1);
			}
			decrement:function(){
				changeBy(-1);
			}
			value:function(){
				return privateCounter;
			}
		}
	}  

上面的闭包对象创建了一个环境，同时为三个函数共享。环境中包含两个私有项：privateCounter的变量和changeBy函数。这两项都无法在函数makeCounter外直接访问。必须通过包装器返回的三个公共函数访问。

	var Counter1=makeCounter();
	var Counter2=makeCounter();
	console.log(Counter1.value()); //0
	Counter1.increment();
	Counter1.increment();
	console.log(Counter1.value()); //2
	Counter1.decrement();
	console.log(Counter1.value()); //1
	console.log(Counter2.value()); //0

两个计数器是各自独立的，因为每次调用makeCounter()函数，其环境是不同的，每次调用中，privateCounter中含有不同的实例  

### 常见错误：在循环中创建闭包 ###

eg:

    for(var i=0;i<5;i++){
		setTimeout(function(){
			console.log(i)
		},1000);
	}